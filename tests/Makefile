# This Makefile is generated by omake: https://github.com/ouonline/omake.git

CC := gcc
AR := ar

ifeq ($(debug), y)
	CFLAGS := -g
else
	CFLAGS := -O2 -DNDEBUG
endif
CFLAGS := $(CFLAGS) -Wall -Werror -Wextra -fPIC

TARGET := test_rbtree test_str_util test_hash test_bitmap test_time_utils

.PHONY: all clean

all: $(TARGET)

test_rbtree_OBJS := test_rbtree.c.test_rbtree.o

test_rbtree_INCLUDE := -I../..

test_rbtree_LIBS := ../libutils.a

test_rbtree.c.test_rbtree.o: test_rbtree.c
	$(CC) $(CFLAGS) $(test_rbtree_INCLUDE) -c $< -o $@

.PHONY: test_rbtree_pre_process

$(test_rbtree_OBJS): | test_rbtree_pre_process

test_rbtree_pre_process:
	$(MAKE) debug=$(debug) -C ..

test_str_util_OBJS := test_str_util.c.test_str_util.o

test_str_util_INCLUDE := -I../..

test_str_util_LIBS := ../libutils.a

test_str_util.c.test_str_util.o: test_str_util.c
	$(CC) $(CFLAGS) $(test_str_util_INCLUDE) -c $< -o $@

.PHONY: test_str_util_pre_process

$(test_str_util_OBJS): | test_str_util_pre_process

test_str_util_pre_process:
	$(MAKE) debug=$(debug) -C ..

test_hash_OBJS := test_hash.c.test_hash.o

test_hash_INCLUDE := -I../..

test_hash_LIBS := ../libutils.a

test_hash.c.test_hash.o: test_hash.c
	$(CC) $(CFLAGS) $(test_hash_INCLUDE) -c $< -o $@

.PHONY: test_hash_pre_process

$(test_hash_OBJS): | test_hash_pre_process

test_hash_pre_process:
	$(MAKE) debug=$(debug) -C ..

test_bitmap_OBJS := test_bitmap.c.test_bitmap.o

test_bitmap_INCLUDE := -I../..

test_bitmap_LIBS := ../libutils.a

test_bitmap.c.test_bitmap.o: test_bitmap.c
	$(CC) $(CFLAGS) $(test_bitmap_INCLUDE) -c $< -o $@

.PHONY: test_bitmap_pre_process

$(test_bitmap_OBJS): | test_bitmap_pre_process

test_bitmap_pre_process:
	$(MAKE) debug=$(debug) -C ..

test_time_utils_OBJS := test_time_utils.c.test_time_utils.o

test_time_utils_INCLUDE := -I../..

test_time_utils_LIBS := ../libutils.a

test_time_utils.c.test_time_utils.o: test_time_utils.c
	$(CC) $(CFLAGS) $(test_time_utils_INCLUDE) -c $< -o $@

.PHONY: test_time_utils_pre_process

$(test_time_utils_OBJS): | test_time_utils_pre_process

test_time_utils_pre_process:
	$(MAKE) debug=$(debug) -C ..

test_rbtree: $(test_rbtree_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(test_rbtree_LIBS)

test_str_util: $(test_str_util_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(test_str_util_LIBS)

test_hash: $(test_hash_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(test_hash_LIBS)

test_bitmap: $(test_bitmap_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(test_bitmap_LIBS)

test_time_utils: $(test_time_utils_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(test_time_utils_LIBS)

clean:
	rm -f $(TARGET) $(test_rbtree_OBJS) $(test_str_util_OBJS) $(test_hash_OBJS) $(test_bitmap_OBJS) $(test_time_utils_OBJS)
