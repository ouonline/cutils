# This Makefile is generated by omake: https://github.com/ouonline/omake.git

AR := ar
CC := gcc

ifeq ($(debug), y)
	CFLAGS := -g
else
	CFLAGS := -O2 -DNDEBUG
endif
CFLAGS := $(CFLAGS) -Wall -Werror -Wextra -fPIC

TARGET := test_rbtree test_str_util test_hash test_bitmap test_time_utils

.PHONY: all clean

all: $(TARGET)

.PHONY: __omake_dep__1

__omake_dep__1:
	$(MAKE) debug=$(debug) libutils.a -C ..

test_rbtree_OBJS := test_rbtree.c.test_rbtree.o

test_rbtree_INCLUDE := -I../..

test_rbtree_LIBS := ../libutils.a

test_rbtree.c.test_rbtree.o: test_rbtree.c
	$(CC) $(CFLAGS) $(test_rbtree_INCLUDE) -c $< -o $@

test_rbtree: $(test_rbtree_OBJS) | __omake_dep__1
	$(CC) $(CFLAGS) -o $@ $^ $(test_rbtree_LIBS)

test_str_util_OBJS := test_str_util.c.test_str_util.o

test_str_util_INCLUDE := -I../..

test_str_util_LIBS := ../libutils.a

test_str_util.c.test_str_util.o: test_str_util.c
	$(CC) $(CFLAGS) $(test_str_util_INCLUDE) -c $< -o $@

test_str_util: $(test_str_util_OBJS) | __omake_dep__1
	$(CC) $(CFLAGS) -o $@ $^ $(test_str_util_LIBS)

test_hash_OBJS := test_hash.c.test_hash.o

test_hash_INCLUDE := -I../..

test_hash_LIBS := ../libutils.a

test_hash.c.test_hash.o: test_hash.c
	$(CC) $(CFLAGS) $(test_hash_INCLUDE) -c $< -o $@

test_hash: $(test_hash_OBJS) | __omake_dep__1
	$(CC) $(CFLAGS) -o $@ $^ $(test_hash_LIBS)

test_bitmap_OBJS := test_bitmap.c.test_bitmap.o

test_bitmap_INCLUDE := -I../..

test_bitmap_LIBS := ../libutils.a

test_bitmap.c.test_bitmap.o: test_bitmap.c
	$(CC) $(CFLAGS) $(test_bitmap_INCLUDE) -c $< -o $@

test_bitmap: $(test_bitmap_OBJS) | __omake_dep__1
	$(CC) $(CFLAGS) -o $@ $^ $(test_bitmap_LIBS)

test_time_utils_OBJS := test_time_utils.c.test_time_utils.o

test_time_utils_INCLUDE := -I../..

test_time_utils_LIBS := ../libutils.a

test_time_utils.c.test_time_utils.o: test_time_utils.c
	$(CC) $(CFLAGS) $(test_time_utils_INCLUDE) -c $< -o $@

test_time_utils: $(test_time_utils_OBJS) | __omake_dep__1
	$(CC) $(CFLAGS) -o $@ $^ $(test_time_utils_LIBS)

clean:
	rm -f $(TARGET) $(test_rbtree_OBJS) $(test_str_util_OBJS) $(test_hash_OBJS) $(test_bitmap_OBJS) $(test_time_utils_OBJS)
