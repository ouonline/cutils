# This Makefile is generated by omake: https://github.com/ouonline/omake.git

CC := gcc

ifeq ($(debug), y)
	CFLAGS += -g
else
	CFLAGS += -O2 -DNDEBUG
endif

TARGET := test_time_utils test_bitmap test_hash test_str_util test_rbtree

.PHONY: all clean

all: $(TARGET)

.PHONY: omake_phony_0

omake_phony_0:
	$(MAKE) debug=$(debug) libutils_static.a -C ..

test_time_utils_INCLUDE := -I../..

test_time_utils.c.test_time_utils.o: test_time_utils.c
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC $(test_time_utils_INCLUDE) -c $< -o $@

test_time_utils_OBJS := test_time_utils.c.test_time_utils.o

test_time_utils_LIBS := ../libutils_static.a

test_time_utils: $(test_time_utils_OBJS) | omake_phony_0
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC -o $@ $^ $(test_time_utils_LIBS)

test_bitmap_INCLUDE := -I../..

test_bitmap.c.test_bitmap.o: test_bitmap.c
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC $(test_bitmap_INCLUDE) -c $< -o $@

test_bitmap_OBJS := test_bitmap.c.test_bitmap.o

test_bitmap_LIBS := ../libutils_static.a

test_bitmap: $(test_bitmap_OBJS) | omake_phony_0
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC -o $@ $^ $(test_bitmap_LIBS)

test_hash_INCLUDE := -I../..

test_hash.c.test_hash.o: test_hash.c
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC $(test_hash_INCLUDE) -c $< -o $@

test_hash_OBJS := test_hash.c.test_hash.o

test_hash_LIBS := ../libutils_static.a

test_hash: $(test_hash_OBJS) | omake_phony_0
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC -o $@ $^ $(test_hash_LIBS)

test_str_util_INCLUDE := -I../..

test_str_util.c.test_str_util.o: test_str_util.c
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC $(test_str_util_INCLUDE) -c $< -o $@

test_str_util_OBJS := test_str_util.c.test_str_util.o

test_str_util_LIBS := ../libutils_static.a

test_str_util: $(test_str_util_OBJS) | omake_phony_0
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC -o $@ $^ $(test_str_util_LIBS)

test_rbtree_INCLUDE := -I../..

test_rbtree.c.test_rbtree.o: test_rbtree.c
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC $(test_rbtree_INCLUDE) -c $< -o $@

test_rbtree_OBJS := test_rbtree.c.test_rbtree.o

test_rbtree_LIBS := ../libutils_static.a

test_rbtree: $(test_rbtree_OBJS) | omake_phony_0
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC -o $@ $^ $(test_rbtree_LIBS)

clean:
	rm -f $(TARGET) $(test_time_utils_OBJS) $(test_bitmap_OBJS) $(test_hash_OBJS) $(test_str_util_OBJS) $(test_rbtree_OBJS)
